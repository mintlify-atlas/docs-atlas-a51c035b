---
title: "API Authentication"
description: "Authenticate your API requests using API keys and required headers"
---

## Overview

The Trieve API uses API key authentication for all requests. This page covers the specific requirements for API authentication in the context of making direct API calls.

<Info>
  For comprehensive information about creating and managing API keys, see the main [Authentication Guide](/authentication).
</Info>

## Authentication Methods

Trieve accepts API keys via two header options:

<Tabs>
  <Tab title="Authorization (Recommended)">
    Use the standard `Authorization` header with Bearer token format:
    
    ```bash
    Authorization: Bearer tr-********************************
    ```
    
    This is the recommended approach and follows OAuth 2.0 conventions.
  </Tab>
  <Tab title="X-API-KEY">
    Alternative header for compatibility:
    
    ```bash
    X-API-KEY: tr-********************************
    ```
    
    Use this if your client library doesn't support Bearer tokens.
  </Tab>
</Tabs>

## Required Headers

Most API endpoints require these headers:

### Dataset-Scoped Endpoints

Endpoints that operate on dataset resources (chunks, files, search, etc.):

```bash
Authorization: Bearer tr-********************************
TR-Dataset: 550e8400-e29b-41d4-a716-446655440000
Content-Type: application/json
```

| Header | Description | Format |
|--------|-------------|---------|
| `Authorization` | Your API key with Bearer prefix | `Bearer tr-...` |
| `TR-Dataset` | Dataset ID or tracking_id | UUID or string |
| `Content-Type` | Request content type | `application/json` |

### Organization-Scoped Endpoints

Endpoints that operate on organization resources (API keys, users, datasets):

```bash
Authorization: Bearer tr-********************************
TR-Organization: 550e8400-e29b-41d4-a716-446655440000
Content-Type: application/json
```

<Note>
  The `TR-Dataset` header accepts either a UUID or a tracking_id. If the value is a valid UUID, it's treated as an ID; otherwise, it's treated as a tracking_id.
</Note>

## API Key Security Levels

API keys have different permission levels defined in the OpenAPI security schemes:

<AccordionGroup>
  <Accordion title="readonly" icon="eye">
    Read-only access for search and retrieval operations.
    
    **Allowed operations:**
    - Search chunks
    - Get chunks, groups, and datasets
    - View analytics
    - Autocomplete
    - Recommendations
    
    **Not allowed:**
    - Create or update chunks
    - Delete resources
    - Manage API keys
  </Accordion>
  
  <Accordion title="admin" icon="user-shield">
    Full CRUD access for dataset operations.
    
    **Allowed operations:**
    - All readonly operations
    - Create, update, and delete chunks
    - Upload files
    - Manage chunk groups
    - Send analytics events
    
    **Not allowed:**
    - Manage organization settings
    - Create or delete API keys
    - Manage billing
  </Accordion>
</AccordionGroup>

<Warning>
  The `admin` role in the OpenAPI spec refers to having full access to dataset operations. For organization-level operations, use API keys created at the organization level.
</Warning>

## Example Requests

### Search Request

<CodeGroup>
```bash cURL
curl -X POST "https://api.trieve.ai/api/chunk/search" \
  -H "Authorization: Bearer tr-********************************" \
  -H "TR-Dataset: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -H "X-API-Version: V2" \
  -d '{
    "query": "search term",
    "search_type": "hybrid",
    "page_size": 10
  }'
```

```typescript TypeScript (fetch)
const response = await fetch("https://api.trieve.ai/api/chunk/search", {
  method: "POST",
  headers: {
    "Authorization": "Bearer tr-********************************",
    "TR-Dataset": "550e8400-e29b-41d4-a716-446655440000",
    "Content-Type": "application/json",
    "X-API-Version": "V2"
  },
  body: JSON.stringify({
    query: "search term",
    search_type: "hybrid",
    page_size: 10
  })
});

const data = await response.json();
```

```python Python (requests)
import requests

headers = {
    "Authorization": "Bearer tr-********************************",
    "TR-Dataset": "550e8400-e29b-41d4-a716-446655440000",
    "Content-Type": "application/json",
    "X-API-Version": "V2"
}

data = {
    "query": "search term",
    "search_type": "hybrid",
    "page_size": 10
}

response = requests.post(
    "https://api.trieve.ai/api/chunk/search",
    headers=headers,
    json=data
)

results = response.json()
```
</CodeGroup>

### Create Chunk Request

<CodeGroup>
```bash cURL
curl -X POST "https://api.trieve.ai/api/chunk" \
  -H "Authorization: Bearer tr-********************************" \
  -H "TR-Dataset: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "chunk_html": "<p>Content to index</p>",
    "tracking_id": "my-chunk-123",
    "metadata": {
      "category": "documentation"
    }
  }'
```

```typescript TypeScript
const response = await fetch("https://api.trieve.ai/api/chunk", {
  method: "POST",
  headers: {
    "Authorization": "Bearer tr-********************************",
    "TR-Dataset": "550e8400-e29b-41d4-a716-446655440000",
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    chunk_html: "<p>Content to index</p>",
    tracking_id: "my-chunk-123",
    metadata: {
      category: "documentation"
    }
  })
});
```
</CodeGroup>

### Organization Request

<CodeGroup>
```bash cURL
curl -X GET "https://api.trieve.ai/api/organization/api_key" \
  -H "Authorization: Bearer tr-********************************" \
  -H "TR-Organization: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json"
```

```typescript TypeScript
const response = await fetch(
  "https://api.trieve.ai/api/organization/api_key",
  {
    method: "GET",
    headers: {
      "Authorization": "Bearer tr-********************************",
      "TR-Organization": "550e8400-e29b-41d4-a716-446655440000",
      "Content-Type": "application/json"
    }
  }
);
```
</CodeGroup>

## Alternative Header Names

For compatibility, Trieve accepts alternative header names:

| Standard | Alternative |
|----------|-------------|
| `Authorization` | `X-API-KEY` |
| `TR-Dataset` | `x-dataset` |
| `TR-Organization` | `x-organization` |

<Tip>
  Use the standard header names (`Authorization`, `TR-Dataset`, `TR-Organization`) for consistency with documentation and examples.
</Tip>

## API Versioning

Control which API version to use with the `X-API-Version` header:

```bash
X-API-Version: V2
```

<Info>
  - **V2**: Default for organizations created after July 12, 2024
  - **V1**: Default for earlier organizations
  - Affects response formats for search and recommendation endpoints
</Info>

## Authentication Errors

### 401 Unauthorized

Occurs when authentication fails:

```json
{
  "message": "Invalid API key or authentication header missing"
}
```

**Common causes:**
- Missing `Authorization` header
- Invalid API key format
- Expired API key
- Incorrect Bearer token format

**Solutions:**
- Verify API key is complete and starts with `tr-`
- Check for proper `Bearer ` prefix (note the space)
- Confirm API key hasn't expired
- Ensure you're using the correct environment (production vs local)

### 403 Forbidden

Occurs when authentication succeeds but authorization fails:

```json
{
  "message": "Insufficient permissions for this operation"
}
```

**Common causes:**
- API key lacks required role (readonly vs admin)
- Dataset not accessible with this API key
- Scope restrictions prevent access to this endpoint

**Solutions:**
- Verify API key has `admin` role for write operations
- Check dataset_ids in API key configuration
- Review scope restrictions on the API key

### Missing Required Headers

```json
{
  "message": "Dataset ID is required"
}
```

Add the `TR-Dataset` header with your dataset UUID or tracking_id.

## Security Best Practices

<CardGroup cols={2}>
  <Card title="Use Environment Variables" icon="code">
    Never hardcode API keys in source code. Use environment variables or secret management.
  </Card>
  <Card title="Rotate Keys Regularly" icon="rotate">
    Implement a key rotation schedule, especially for production environments.
  </Card>
  <Card title="Use Scoped Keys" icon="shield">
    Restrict API keys to specific datasets and routes using scope configuration.
  </Card>
  <Card title="Monitor Usage" icon="chart-line">
    Track API key usage and set up alerts for suspicious activity.
  </Card>
</CardGroup>

## Testing Authentication

Test your API key with a simple request:

<CodeGroup>
```bash cURL
curl -X GET "https://api.trieve.ai/api/auth/me" \
  -H "Authorization: Bearer tr-********************************"
```

```typescript TypeScript
const response = await fetch("https://api.trieve.ai/api/auth/me", {
  headers: {
    "Authorization": "Bearer tr-********************************"
  }
});

if (response.ok) {
  const user = await response.json();
  console.log("Authenticated as:", user);
} else {
  console.error("Authentication failed:", response.status);
}
```
</CodeGroup>

A successful response returns your user information, confirming the API key is valid.

## SDK Authentication

If you're using the official SDKs, authentication is handled automatically:

<CodeGroup>
```typescript TypeScript SDK
import { TrieveSDK } from "trieve-ts-sdk";

const trieve = new TrieveSDK({
  apiKey: process.env.TRIEVE_API_KEY,
  datasetId: process.env.TRIEVE_DATASET_ID
});

// Headers are automatically included in all requests
const results = await trieve.search({
  query: "search term",
  search_type: "hybrid"
});
```

```python Python SDK
import trieve_py_client
import os

configuration = trieve_py_client.Configuration(
    host="https://api.trieve.ai"
)
configuration.api_key['ApiKey'] = os.environ.get('TRIEVE_API_KEY')

with trieve_py_client.ApiClient(configuration) as api_client:
    chunk_api = trieve_py_client.ChunkApi(api_client)
    # API key is automatically included
```
</CodeGroup>

<Info>
  Using the official SDKs is recommended as they handle authentication, retries, and error handling automatically.
</Info>

## Next Steps

<CardGroup cols={2}>
  <Card title="Create API Keys" icon="key" href="/authentication">
    Learn how to create and manage API keys
  </Card>
  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Explore all available endpoints
  </Card>
  <Card title="Search API" icon="magnifying-glass" href="/api-reference/chunks/search">
    Start searching your data
  </Card>
  <Card title="TypeScript SDK" icon="js" href="https://ts-sdk.trieve.ai">
    Use the official SDK
  </Card>
</CardGroup>
