---
title: "Get All Messages"
description: "Get all messages for a given topic"
---

## GET /api/messages/{messages_topic_id}

Retrieve all messages associated with a specific topic. If the topic uses RAG, the response will include chunks alongside each assistant message.

### Path Parameters

<ParamField path="messages_topic_id" type="string" required>
  The ID of the topic to get messages for
</ParamField>

### Headers

<ParamField header="TR-Dataset" type="string" required>
  The dataset ID or tracking_id to use for the request
</ParamField>

<ParamField header="Authorization" type="string" required>
  API key with readonly role or higher for the dataset's organization
</ParamField>

### Response

<ResponseField name="messages" type="array">
  Array of message objects for the topic
  
  <ResponseField name="id" type="string">
    Unique identifier for the message
  </ResponseField>
  
  <ResponseField name="topic_id" type="string">
    ID of the topic this message belongs to
  </ResponseField>
  
  <ResponseField name="sort_order" type="integer">
    Sort order of the message within the topic
  </ResponseField>
  
  <ResponseField name="content" type="string">
    The message content. For RAG topics, assistant messages include chunks in the format `[chunks]||message`.
  </ResponseField>
  
  <ResponseField name="role" type="string">
    The role of the message sender: `user` or `assistant`
  </ResponseField>
  
  <ResponseField name="deleted" type="boolean">
    Whether the message has been deleted
  </ResponseField>
  
  <ResponseField name="prompt_tokens" type="integer">
    Number of tokens in the prompt (for assistant messages)
  </ResponseField>
  
  <ResponseField name="completion_tokens" type="integer">
    Number of tokens in the completion (for assistant messages)
  </ResponseField>
  
  <ResponseField name="dataset_id" type="string">
    ID of the dataset this message belongs to
  </ResponseField>
  
  <ResponseField name="created_at" type="string">
    ISO 8601 timestamp when the message was created
  </ResponseField>
  
  <ResponseField name="updated_at" type="string">
    ISO 8601 timestamp when the message was last updated
  </ResponseField>
</ResponseField>

### Message Content Format

For RAG-enabled topics, assistant messages contain both chunks and the generated response:

- **Format:** `[chunks]||message`
- **Chunks:** JSON array of chunk objects with metadata and scores
- **Separator:** `||`
- **Message:** The assistant's generated text response

Example assistant message content:
```json
"[{\"chunk_html\":\"<p>RAG best practice...</p>\",\"metadata\":{...},\"score\":0.95}]||Based on the documentation, here are the best practices..."
```

### Example Request

```bash cURL
curl -X GET "https://api.trieve.ai/api/messages/550e8400-e29b-41d4-a716-446655440000" \
  -H "Authorization: Bearer tr-********************************" \
  -H "TR-Dataset: ********-****-****-****-************"
```

```typescript TypeScript SDK
import { TrieveSDK } from "trieve-ts-sdk";

const trieve = new TrieveSDK({
  apiKey: "tr-********************************",
  datasetId: "********-****-****-****-************"
});

const messages = await trieve.getAllTopicMessages({
  messages_topic_id: "550e8400-e29b-41d4-a716-446655440000"
});

console.log(`Found ${messages.length} messages`);
messages.forEach(msg => {
  console.log(`${msg.role}: ${msg.content}`);
});
```

```python Python SDK
from trieve_py_client import TrieveSDK

trieve = TrieveSDK(
  api_key="tr-********************************",
  dataset_id="********-****-****-****-************"
)

messages = trieve.get_all_topic_messages(
  messages_topic_id="550e8400-e29b-41d4-a716-446655440000"
)

print(f"Found {len(messages)} messages")
for msg in messages:
  print(f"{msg['role']}: {msg['content']}")
```

### Example Response

```json
[
  {
    "id": "e3e3e3e3-e3e3-e3e3-e3e3-e3e3e3e3e3e3",
    "topic_id": "550e8400-e29b-41d4-a716-446655440000",
    "sort_order": 1,
    "content": "What are the best practices for RAG?",
    "role": "user",
    "deleted": false,
    "prompt_tokens": null,
    "completion_tokens": null,
    "dataset_id": "********-****-****-****-************",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z"
  },
  {
    "id": "f4f4f4f4-f4f4-f4f4-f4f4-f4f4f4f4f4f4",
    "topic_id": "550e8400-e29b-41d4-a716-446655440000",
    "sort_order": 2,
    "content": "[{\"chunk_html\":\"<p>RAG systems should...</p>\",\"score\":0.95}]||Based on the retrieved documentation, here are the key best practices for RAG systems: 1) Use hybrid search combining semantic and keyword matching, 2) Implement proper chunk sizing, 3) Use reranking for better results.",
    "role": "assistant",
    "deleted": false,
    "prompt_tokens": 450,
    "completion_tokens": 120,
    "dataset_id": "********-****-****-****-************",
    "created_at": "2024-01-15T10:30:05Z",
    "updated_at": "2024-01-15T10:30:05Z"
  }
]
```
